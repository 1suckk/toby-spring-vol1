# 템플릿 콜백 패턴
전략 패턴의 변형 패턴.
**전략 패턴의 전략이 콜백으로 변경된 것**이다

스프링의 많은 API나 기능을 살펴보면 템플릿 콜백 패턴을 적용한 경우를 많이 발견할 수 있다.   
스프링을 사용하는 개발자라면 스프링이 제공하는 템플릿 콜백 기능을 잘 사용할 수 있어야 한다.  
기계적으로 사용하는 경우와 적용된 패턴을 이해하고 사용하는건 큰 차ㅣㅇ가 있다.  

템플릿 콜백 패턴은 DI와 OOP를 적극적으로 응용한 결과이다.  
어떤 소스 코드상의 알고리즘에서 특정 환경 또는 상황에 맞게 확장 또는 변경을 해야 할 경우 매우 유용하게 사용하는 패턴

템플릿 = 전략 패턴의 컨텍스트   
콜백  = 실행되는 것을 목적으로 다른 객체의 메서드에 전달되는 객체 (익명 내부 클래스로 만들어지는 객체 )



## 장점

- 코드 중복 감소
- 자식 클래스의 역할을 감소시키면서 핵심로직 관리 용이
- 객체 추가 및 확장을 쉽게 가능
- 재사용성 증가


## 단점

- 추상 메소드가 너무 많으면 복잡성 증가
- 추상 클래스와 구현 클래스간의 관계 복잡도가 증가

## 언제 템플릿 콜백 패턴을 사용해야 하는가?

반복되는 코드를 줄이는 방법으로는 전략 패턴, 템플릿 메서드 패턴, 템플릿 콜백 패턴 등을 쓸 수 있다.  
고정된 작업 흐름을 갖고 있으면서 여기저기서 자주 반복되는 코드가 있다면, 중복되는 코드를 분리할 방법을 생각해보는 습관을 기르자.  

만약 일부 작업을 필요에 따라 바꿔 사용해야 한다면, 인터페이스를 사이에 두고 분리하는 전략 패턴을 적용하고 DI로 의존 관계를 외부(클라이언트)에서 제어하도록 만든다.   
만약 바뀌는 부분이 한 애플리케이션 안에서 동시에 여러 종류가 만들어질 수 있다면, 템플릿 콜백 패턴을 고려해볼 수 있다.  

[참고](https://western-sky.tistory.com/41)

# JDBC Template의 전략 패턴 적용 과정

![](https://gmlwjd9405.github.io/images/setting-for-dbprogramming/data-access-layer2.png)

JDBC를 사용하게 되면 공통적으로 구현해야 하는 코드가 존재하고, 이를 반복적으로 사용하는 것이 불가피하였음. 

Spring에서는 이러한 반복적인 코드를 사용하지 않고 코드를 작성할 수 있는 방법을 JDBC Template을 통해 제공.


기존 JDBC를 통한 DB 접근 과정
1. 드라이버 로딩
2. 데이터베이스 연결
3. **SQL문 작성 및 전송**
4. 자원 해제

**변하지 않는 부분**은 1,2,4번.  
변하는 부분인 3번을 제외하면 모두 반복되는 내용이다.  

이러한 특성을 이용해 템플릿 패턴을 적용하여 반복성을 최소화했다.  
